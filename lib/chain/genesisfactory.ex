defmodule Chain.GenesisFactory do
  alias Chain.Account, as: Account

  @spec testnet() :: Chain.Block.t()
  def testnet() do
    genesis(genesis_accounts(), genesis_transactions(genesis_miner()), genesis_miner())
  end

  def testnet_parent() do
    genesis_parent(genesis_state(genesis_accounts()), genesis_miner())
  end

  defp addrBalance(addr, balance) do
    {Wallet.from_address(addr), %Account{balance: balance}}
  end

  defp addrAccount(addr, account) do
    {Wallet.from_address(addr), account}
  end

  @spec genesis_accounts() :: [{Wallet.t(), Account.t()}]
  def genesis_accounts() do
    accountant = 0x96CDE043E986040CB13FFAFD80EB8CEAC196FB84

    std = [
      # The Accountant
      addrBalance(accountant, ether(1000)),
      # The Faucet
      addrBalance(0xBADA81FAE68925FEC725790C34B68B5FACA90D45, ether(1000)),
      # Reserved A-D
      addrBalance(0x34E3961098DE3348B465CC82791BD0F7EBCE3ECD, ether(1000)),
      addrBalance(0xC0C416B326133D74335E6828D558EFE315BD597E, ether(1000)),
      addrBalance(0x58CC80F5526594F07F33FD4BE4AEF153BAB602B2, ether(1000)),
      addrBalance(0x45AA0730CF4216F7195FC1F5903A171A1FAA5209, ether(1000)),

      # The Registry with the accountant placed
      addrAccount(
        Diode.registryAddress(),
        %Account{
          balance: ether(100_000_000),
          code: Base16.decode(registryContract())
        }
        |> Account.storageSetValue(1, accountant)
      ),

      # The Fleet with the operator and accountant placed
      addrAccount(
        Diode.fleetAddress(),
        %Account{
          balance: 0,
          code: Base16.decode(fleetContract())
        }
        |> Account.storageSetValue(0, Diode.registryAddress() |> :binary.decode_unsigned())
        |> Account.storageSetValue(2, accountant)
      )
    ]

    if Diode.dev_mode?() do
      std ++
        Enum.map(Diode.wallets(), fn wallet ->
          {wallet, %Account{balance: ether(1000)}}
        end)
    else
      std
    end
  end

  def genesis_miner() do
    Wallet.from_privkey(
      <<149, 210, 74, 221, 235, 25, 240, 87, 85, 95, 119, 147, 106, 182, 149, 28, 112, 227, 22,
        173, 235, 134, 113, 172, 125, 222, 191, 154, 120, 128, 129, 203>>
    )
  end

  @spec genesis_transactions(Wallet.t()) :: [Chain.Transaction.t(), ...]
  def genesis_transactions(miner) do
    # Call "blockReward()":
    priv = miner |> Wallet.privkey!()

    tx =
      %Chain.Transaction{
        nonce: 0,
        gasPrice: 0,
        gasLimit: 1_000_000_000,
        to: Diode.registryAddress(),
        data: ABI.encode_spec("blockReward")
      }
      |> Chain.Transaction.sign(priv)

    [tx]
  end

  @spec genesis_parent(Chain.State.t(), Wallet.t()) :: Chain.Block.t()
  def genesis_parent(state, miner) do
    %Chain.Block{
      header: %Chain.Header{
        block_hash: nil,
        state_hash: Chain.State.hash(state),
        miner_pubkey: Wallet.pubkey!(miner)
      }
    }
  end

  def genesis_state(accounts) do
    Enum.reduce(accounts, Chain.State.new(), fn {wallet, user_account}, state ->
      Chain.State.set_account(state, Wallet.address!(wallet), user_account)
    end)
  end

  @spec genesis(any(), [Chain.Transaction.t()], Wallet.t()) :: Chain.Block.t()
  def genesis(accounts, transactions, miner) do
    state = genesis_state(accounts)
    Chain.state_store(state)

    parent = genesis_parent(state, miner)
    block = Chain.Block.create(parent, transactions, miner, 1_555_510_594)
    header = Chain.Block.header(block)

    header =
      %{header | miner_signature: <<0::520>>}
      |> Chain.Header.update_hash()

    %{block | header: header}
  end

  defp ether(x) do
    Shell.ether(x)
  end

  defp registryContract() do
    "0x6080604052600436106100e25763ffffffff60e060020a6000350416630a938dff81146100e75780630ac168a1146101205780631b3b98c8146101375780631dd44706146101a15780634fb3ccc5146101b6578063534a2422146101e75780636f9874a4146101fb5780637fca4a29146102105780638d23fc61146102315780638da5cb5b1461025257806399ab110d14610267578063acc77cba14610287578063b0128d921461029b578063be3bb93c146102b3578063c487e3f7146102da578063c4a9e116146102e2578063c76a1173146102f7578063cb106cf81461031b575b600080fd5b3480156100f357600080fd5b5061010e60ff60043516600160a060020a0360243516610330565b60408051918252519081900360200190f35b34801561012c57600080fd5b5061013561059d565b005b34801561014357600080fd5b50604080516060818101909252610135916004803592600160a060020a0360243581169360443590911692606435926084359260a4359236929091610124919060c4906003908390839080828437509396506107ed95505050505050565b3480156101ad57600080fd5b50610135610ac6565b3480156101c257600080fd5b506101cb610c79565b60408051600160a060020a039092168252519081900360200190f35b610135600160a060020a0360043516610c88565b34801561020757600080fd5b5061010e610d68565b34801561021c57600080fd5b50610135600160a060020a0360043516610d72565b34801561023d57600080fd5b506101cb600160a060020a0360043516610fba565b34801561025e57600080fd5b506101cb610fd5565b34801561027357600080fd5b506101356004803560248101910135610fe4565b610135600160a060020a036004351661116c565b3480156102a757600080fd5b506101356004356112be565b3480156102bf57600080fd5b5061010e60ff60043516600160a060020a0360243516611387565b61013561139a565b3480156102ee57600080fd5b5061010e6113a6565b34801561030357600080fd5b50610135600160a060020a03600435166024356113ac565b34801561032757600080fd5b5061010e61148d565b600060ff831615156103bb57600160a060020a038216600090815260066020908152604091829020825160a0810184528154818501908152600183015460608084019190915260028401546080840152908252845190810185526003830154815260048301548185015260059092015493820193909352908201526103b490611493565b9050610597565b8260ff166001141561043f57600160a060020a038216600090815260066020908152604091829020825160a0810184528154818501908152600183015460608084019190915260028401546080840152908252845190810185526003830154815260048301548185015260059092015493820193909352908201526103b4906114a2565b8260ff16600214156104c357600160a060020a038216600090815260066020908152604091829020825160a0810184528154818501908152600183015460608084019190915260028401546080840152908252845190810185526003830154815260048301548185015260059092015493820193909352908201526103b4906114b1565b8260ff166003141561054757600160a060020a038216600090815260066020908152604091829020825160a0810184528154818501908152600183015460608084019190915260028401546080840152908252845190810185526003830154815260048301548185015260059092015493820193909352908201526103b4906114c0565b6040805160e560020a62461bcd02815260206004820152601260248201527f556e68616e646c656420617267756d656e740000000000000000000000000000604482015290519081900360640190fd5b92915050565b60008080803341148015906105b157504115155b80156105c85750600154600160a060020a03163314155b15610643576040805160e560020a62461bcd02815260206004820152603060248201527f4f6e6c7920746865206d696e6572206f662074686520626c6f636b2063616e2060448201527f63616c6c2074686973206d6574686f6400000000000000000000000000000000606482015290519081900360840190fd5b3341146106c0576040805160e560020a62461bcd02815260206004820152603060248201527f4f6e6c7920746865206d696e6572206f662074686520626c6f636b2063616e2060448201527f63616c6c2074686973206d6574686f6400000000000000000000000000000000606482015290519081900360840190fd5b6106c8610d68565b600754146106d8576106d86114cf565b6106fb416106f6670de0b6b3a764000061271063ffffffff61175316565b61178c565b600093505b6008548410156107db57600880548590811061071857fe5b6000918252602080832090910154600160a060020a031680835260099091526040909120549093506107529061271063ffffffff61185316565b915061075f600084611876565b90508082111561076d578091505b60008211156107b7576107808383611a8a565b6040518290600160a060020a038516907fc083a1647e3ee591bf42b82564ffb4d16fdbb26068f0080da911c8d8300fd84a90600090a35b600160a060020a038316600090815260096020526040812055600190930192610700565b6107e7600860006125c9565b50505050565b6060600088438110610849576040805160e560020a62461bcd02815260206004820152601760248201527f5469636b65742066726f6d20746865206675747572653f000000000000000000604482015290519081900360640190fd5b6007546000190161085d8262027600611853565b146108b2576040805160e560020a62461bcd02815260206004820152600b60248201527f57726f6e672065706f6368000000000000000000000000000000000000000000604482015290519081900360640190fd5b868617151561090b576040805160e560020a62461bcd02815260206004820152601460248201527f496e76616c6964207469636b65742076616c7565000000000000000000000000604482015290519081900360640190fd5b60408051600680825260e08201909252906020820160c080388339019050509250894083600081518110151561093d57fe5b602090810290910101528251600160a060020a038a16908490600190811061096157fe5b602090810290910101528251600160a060020a038916908490600290811061098557fe5b6020908102909101015282518790849060039081106109a057fe5b6020908102909101015282518690849060049081106109bb57fe5b6020908102909101015282518590849060059081106109d657fe5b6020908102909101015260016109eb84611b5f565b60408087015187516020808a0151845160008082528184018088529790975260ff9094168486015260608401929092526080830191909152915160a080830194601f198301938390039091019190865af1158015610a4d573d6000803e3d6000fd5b505050602060405103519150610a638983611cbd565b610a708989848a8a611da9565b81600160a060020a031688600160a060020a03168a600160a060020a03167fc21a4132cfb2e72d1dd6f45bcb2dabb1722a19b036c895975db93175b1c5c06f60405160405180910390a450505050505050505050565b336000818152600560208181526040808420815160a081018352815481840190815260018301546060808401919091526002840154608084015290825283519081018452600383015481526004830154818601529482015492850192909252918101929092529190610b37906114c0565b905060008111610b91576040805160e560020a62461bcd02815260206004820152601060248201527f43616e2774207769746864726177203000000000000000000000000000000000604482015290519081900360640190fd5b6040805160a08101825283548183019081526001850154606080840191909152600286015460808401529082528251908101835260038501548152600485015460208281019190915260058601549382019390935291810191909152610bfd908263ffffffff611fcc16565b600160a060020a0384166000818152600560208181526040808420865180518255808401516001830155820151600282015595820151805160038801559182015160048701559081015194909101939093559151909183156108fc02918491818181858888f193505050501580156107e7573d6000803e3d6000fd5b600154600160a060020a031681565b6000610c9382612059565b600160a060020a038116600090815260066020908152604091829020825160a081018452815481850190815260018301546060808401919091526002840154608084015290825284519081018552600383015481526004830154818501526005909201549382019390935290820152909150610d15903463ffffffff61226716565b600160a060020a0390911660009081526006602090815260409182902083518051825580830151600183015583015160028201559281015180516003850155908101516004840155015160059091015550565b6202760043065b90565b600080600080610d8185612059565b935083600160a060020a0316634fb3ccc56040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610dc157600080fd5b505af1158015610dd5573d6000803e3d6000fd5b505050506040513d6020811015610deb57600080fd5b5051600160a060020a038516600090815260066020908152604091829020825160a08101845281548185019081526001830154606080840191909152600284015460808401529082528451908101855260038301548152600483015481850152600583015494810194909452918201929092529194509250610e6c906114c0565b905060008111610ec6576040805160e560020a62461bcd02815260206004820152601060248201527f43616e2774207769746864726177203000000000000000000000000000000000604482015290519081900360640190fd5b6040805160a08101825283548183019081526001850154606080840191909152600286015460808401529082528251908101835260038501548152600485015460208281019190915260058601549382019390935291810191909152610f32908263ffffffff611fcc16565b600160a060020a038086166000908152600660209081526040808320855180518255808401516001830155820151600282015594820151805160038701559182015160048601559081015160059094019390935591519085169183156108fc02918491818181858888f19350505050158015610fb2573d6000803e3d6000fd5b505050505050565b600460205260009081526040902054600160a060020a031681565b600054600160a060020a031681565b6000610fee6125ea565b821580610ffd57506009830615155b15611052576040805160e560020a62461bcd02815260206004820152601560248201527f496e76616c6964207469636b6574206c656e6774680000000000000000000000604482015290519081900360640190fd5b600091505b828210156107e75760408051606081019091528085856006860181811061107a57fe5b602090810292909201358352500185856007860181811061109757fe5b60209081029290920135835250018585600886018181106110b457fe5b60200291909101359091525090506111618484848181106110d157fe5b602002919091013590506110fd8686600187018181106110ed57fe5b9050602002013560001916610d6f565b61110f8787600288018181106110ed57fe5b87876003880181811061111e57fe5b6020029190910135905088886004890181811061113757fe5b60200291909101359050898960058a0181811061115057fe5b9050602002013560001916876107ed565b600982019150611057565b600154600090600160a060020a0316331461118657600080fd5b600160a060020a03828116600090815260046020526040902054161561121c576040805160e560020a62461bcd02815260206004820152602560248201527f44656c656761746520616c726561647920686173206120666c65657420636f6e60448201527f7472616374000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b60015430908390600160a060020a0316611234612609565b600160a060020a03938416815291831660208301529091166040808301919091525190819003606001906000f080158015611273573d6000803e3d6000fd5b50600160a060020a038381166000908152600460205260409020805473ffffffffffffffffffffffffffffffffffffffff191691831691909117905590506112ba81610c88565b5050565b33600081815260056020818152604092839020835160a08101855281548186019081526001830154606080840191909152600284015460808401529082528551908101865260038301548152600483015481850152919093015493810193909352810191909152611335908363ffffffff61228a16565b600160a060020a03909116600090815260056020818152604092839020845180518255808301516001830155840151600282015593810151805160038601559081015160048501559091015191015550565b60006113938383611876565b9392505050565b6113a43334612345565b565b60025481565b60006113b783612059565b600160a060020a038116600090815260066020908152604091829020825160a081018452815481850190815260018301546060808401919091526002840154608084015290825284519081018552600383015481526004830154818501526005909201549382019390935290820152909150611439908363ffffffff61228a16565b600160a060020a039091166000908152600660209081526040918290208351805182558083015160018301558301516002820155928101518051600385015590810151600484015501516005909101555050565b60035481565b600061059782600001516123c5565b600061059782600001516123dc565b600061059782602001516123dc565b600061059782602001516123c5565b6000808080808080808080805b600a5489101561172f57600a80548a9081106114f457fe5b600091825260209091200154600160a060020a03169750611514886123f0565b965061152787606463ffffffff61185316565b600160a060020a0389166000908152600b602052604090206001810154919b5096506115709061155f9061040063ffffffff61175316565b60028801549063ffffffff61246a16565b9450600093505b60038601548410156116e6576003860180548590811061159357fe5b6000918252602080832090910154600160a060020a03168083526004890190915260409091206001810154919c5093506115ea906115d99061040063ffffffff61175316565b60028501549063ffffffff61246a16565b915061161e856116128c6116068661271063ffffffff61175316565b9063ffffffff61175316565b9063ffffffff61185316565b915061162a8b8361178c565b5060005b600383015481101561169b57826004016000846003018381548110151561165157fe5b6000918252602080832090910154600160a060020a031683528201929092526040018120805460ff191681556001818101839055600282018390556003909101919091550161162e565b600160a060020a038b1660009081526004870160205260408120805460ff191681556001810182905560028101829055906116d960038301826125c9565b5050600190930192611577565b600160a060020a0388166000908152600b60205260408120805460ff1916815560018101829055600281018290559061172260038301826125c9565b50506001909801976114dc565b61173b600a60006125c9565b611743610d68565b6007555050505050505050505050565b6000808315156117665760009150611785565b5082820282848281151561177657fe5b041461178157600080fd5b8091505b5092915050565b60008111156112ba57600160a060020a038216600090815260096020526040902054151561180d57600880546001810182556000919091527ff3f7a9fe364faab93b216da50a3214154f22a0a2b415b23a84c8169e8b636ee301805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0384161790555b600160a060020a038216600090815260096020526040902054611836908263ffffffff61246a16565b600160a060020a0383166000908152600960205260409020555050565b60008080831161186257600080fd5b828481151561186d57fe5b04949350505050565b600060ff831615156118fb57600160a060020a038216600090815260056020818152604092839020835160a081018552815481860190815260018301546060808401919091526002840154608084015290825285519081018652600383015481526004830154818501529190930154938101939093528101919091526103b490611493565b8260ff166001141561198057600160a060020a038216600090815260056020818152604092839020835160a081018552815481860190815260018301546060808401919091526002840154608084015290825285519081018652600383015481526004830154818501529190930154938101939093528101919091526103b4906114a2565b8260ff1660021415611a0557600160a060020a038216600090815260056020818152604092839020835160a081018552815481860190815260018301546060808401919091526002840154608084015290825285519081018652600383015481526004830154818501529190930154938101939093528101919091526103b4906114b1565b8260ff166003141561054757600160a060020a038216600090815260056020818152604092839020835160a081018552815481860190815260018301546060808401919091526002840154608084015290825285519081018652600383015481526004830154818501529190930154938101939093528101919091526103b4906114c0565b600160a060020a038216600090815260056020818152604092839020835160a08101855281548186019081526001830154606080840191909152600284015460808401529082528551908101865260038301548152600483015481850152919093015493810193909352810191909152611b0a908263ffffffff61247c16565b600160a060020a03909216600090815260056020818152604092839020855180518255808301516001830155840151600282015594810151805160038701559081015160048601559091015192019190915550565b600080606060008085519350836020026040519080825280601f01601f191660200182016040528015611b9c578160200160208202803883390190505b509250600091505b83821015611c57575060005b6020811015611c4c578582815181101515611bc757fe5b9060200190602002015181602081101515611bde57fe5b1a7f01000000000000000000000000000000000000000000000000000000000000000283828460200201815181101515611c1457fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600101611bb0565b600190910190611ba4565b826040518082805190602001908083835b60208310611c875780518252601f199092019160209182019101611c68565b5181516020939093036101000a600019018019909116921691909117905260405192018290039091209998505050505050505050565b604080517fd90bd651000000000000000000000000000000000000000000000000000000008152600160a060020a0383811660048301529151849283169163d90bd6519160248083019260209291908290030181600087803b158015611d2257600080fd5b505af1158015611d36573d6000803e3d6000fd5b505050506040513d6020811015611d4c57600080fd5b50511515611da4576040805160e560020a62461bcd02815260206004820152601360248201527f556e726567697374657265642064657669636500000000000000000000000000604482015290519081900360640190fd5b505050565b600160a060020a0385166000908152600b60205260408120805490919081908190819060ff161515611e38578454600160ff1990911681178655600a805491820181556000527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a801805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038c161790555b600160a060020a03891660009081526004860160205260409020805490945060ff161515611eaa578354600160ff1990911681178555600386018054918201815560009081526020902001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038b161790555b600160a060020a03881660009081526004850160205260409020805490935060ff161515611f1c578254600160ff1990911681178455600385018054918201815560009081526020902001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038a161790555b8260020154871115611f6e576002830180549088905560018501549088039250611f4c908363ffffffff61246a16565b600180860191909155850154611f68908363ffffffff61246a16565b60018601555b8260030154861115611fc0575060038201805490869055600284015490860390611f9e908263ffffffff61246a16565b600280860191909155850154611fba908263ffffffff61246a16565b60028601555b50505050505050505050565b611fd4612619565b81611fe284602001516123c5565b1015612038576040805160e560020a62461bcd02815260206004820152601660248201527f496e737566666963656e742066726565207374616b6500000000000000000000604482015290519081900360640190fd5b602083015161204d908363ffffffff6124a716565b60208401525090919050565b600160a060020a0380821660009081526004602052604081205490911681811561210a57600154600160a060020a03163314612105576040805160e560020a62461bcd02815260206004820152602660248201527f4f6e6c79207468652063726f6e206163636f756e74616e742063616e2063616c60448201527f6c20746869730000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b611785565b61211c84600160a060020a031661252c565b1515612172576040805160e560020a62461bcd02815260206004820152601e60248201527f496e76616c696420666c65657420636f6e747261637420616464726573730000604482015290519081900360640190fd5b83915081600160a060020a0316634fb3ccc56040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156121b357600080fd5b505af11580156121c7573d6000803e3d6000fd5b505050506040513d60208110156121dd57600080fd5b50519050600160a060020a0381163314611785576040805160e560020a62461bcd02815260206004820152602560248201527f4f6e6c792074686520666c656574206163636f756e74616e742063616e20646f60448201527f2074686973000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b61226f612619565b8251612281908363ffffffff61253416565b83525090919050565b612292612619565b816122a084600001516123c5565b101561231c576040805160e560020a62461bcd02815260206004820152602160248201527f43616e277420756e7374616b65206d6f7265207468616e206973207374616b6560448201527f6400000000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b825161232e908363ffffffff6124a716565b8352602083015161204d908363ffffffff61253416565b600160a060020a038216600090815260056020818152604092839020835160a08101855281548186019081526001830154606080840191909152600284015460808401529082528551908101865260038301548152600483015481850152919093015493810193909352810191909152611b0a908263ffffffff61226716565b60006123d2826000612534565b6040015192915050565b60006123e9826000612534565b5192915050565b600160a060020a0381166000908152600660209081526040808320815160a08101835281548184019081526001830154606080840191909152600284015460808401529082528351908101845260038301548152600483015481860152600590920154928201929092529181019190915261059790611493565b60008282018381101561178157600080fd5b612484612619565b82516040015161249a908363ffffffff61246a16565b8351604001525090919050565b6124af61263f565b6124ba836000612534565b90508181604001511015151561251a576040805160e560020a62461bcd02815260206004820152601b60248201527f496e737566666963656e742066756e647320746f206465647563740000000000604482015290519081900360640190fd5b60408101805192909203909152919050565b6000903b1190565b61253c61263f565b612545836125b8565b1515612581576040805160608101825283815243602082015284518583015191928301916125789163ffffffff61246a16565b90529050610597565b6040805160608101909152835181906125a0908563ffffffff61246a16565b81524360208201526040858101519101529050610597565b602001516202ac6043919091031090565b50805460008255906000526020600020908101906125e79190612661565b50565b6060604051908101604052806003906020820280388339509192915050565b6040516102db8061268083390190565b60c06040519081016040528061262d61263f565b815260200161263a61263f565b905290565b6060604051908101604052806000815260200160008152602001600081525090565b610d6f91905b8082111561267b5760008155600101612667565b50905600608060405234801561001057600080fd5b506040516060806102db83398101604090815281516020830151919092015160018054600160a060020a03938416600160a060020a031991821617909155600080549484169482169490941790935560028054929091169190921617905561025e8061007d6000396000f3006080604052600436106100775763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416633c5f7d46811461007c5780634fb3ccc5146100a4578063570ca735146100d5578063a0619d4a146100ea578063a58bbebd1461011f578063d90bd65114610145575b600080fd5b34801561008857600080fd5b506100a2600160a060020a03600435166024351515610166565b005b3480156100b057600080fd5b506100b96101a8565b60408051600160a060020a039092168252519081900360200190f35b3480156100e157600080fd5b506100b96101b7565b3480156100f657600080fd5b5061010b600160a060020a03600435166101c6565b604080519115158252519081900360200190f35b34801561012b57600080fd5b506100a2600160a060020a036004351660243515156101db565b34801561015157600080fd5b5061010b600160a060020a036004351661021d565b600154600160a060020a0316331461017d57600080fd5b600160a060020a03919091166000908152600660205260409020805460ff1916911515919091179055565b600254600160a060020a031681565b600154600160a060020a031681565b60076020526000908152604090205460ff1681565b600154600160a060020a031633146101f257600080fd5b600160a060020a03919091166000908152600760205260409020805460ff1916911515919091179055565b60066020526000908152604090205460ff16815600a165627a7a72305820d8e16601d99b1e7e6712a6b82a0b41ca239b8bd766bb3da4e22fbb9d01c67acd0029a165627a7a72305820df230d3362d1e6f4ce09e7255281e0b5d98307d82aa842dc6f4eb56780117b9f0029"
  end

  defp fleetContract() do
    "0x6080604052600436106100775763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416633c5f7d46811461007c5780634fb3ccc5146100a4578063570ca735146100d5578063a0619d4a146100ea578063a58bbebd1461011f578063d90bd65114610145575b600080fd5b34801561008857600080fd5b506100a2600160a060020a03600435166024351515610166565b005b3480156100b057600080fd5b506100b9610191565b60408051600160a060020a039092168252519081900360200190f35b3480156100e157600080fd5b506100b96101a0565b3480156100f657600080fd5b5061010b600160a060020a03600435166101af565b604080519115158252519081900360200190f35b34801561012b57600080fd5b506100a2600160a060020a036004351660243515156101c4565b34801561015157600080fd5b5061010b600160a060020a03600435166101ef565b600160a060020a03919091166000908152600660205260409020805460ff1916911515919091179055565b600254600160a060020a031681565b600154600160a060020a031681565b60076020526000908152604090205460ff1681565b600160a060020a03919091166000908152600760205260409020805460ff1916911515919091179055565b60066020526000908152604090205460ff16815600a165627a7a7230582089b9bcc713b4f4f96c8f5c4ee7ee9d9db9dcd4998680fd1044cba3ec2911015e0029"
  end
end
